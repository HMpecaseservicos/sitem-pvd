# ğŸ—ï¸ DIAGRAMA TÃ‰CNICO DO SISTEMA PDV HAMBURGUERIA

## Arquitetura Geral

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        INTERFACE DO USUÃRIO (index.html)               â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚Dashboardâ”‚Pedidos  â”‚CardÃ¡pio â”‚Clientes â”‚Estoque  â”‚Financ.  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â”‚
â”‚       â”‚         â”‚         â”‚         â”‚         â”‚         â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚         â”‚         â”‚         â”‚         â”‚         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MODULE MANAGER (app.js)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Orquestrador Central                                           â”‚   â”‚
â”‚  â”‚ - Lazy loading de mÃ³dulos                                      â”‚   â”‚
â”‚  â”‚ - NavegaÃ§Ã£o entre mÃ³dulos                                      â”‚   â”‚
â”‚  â”‚ - Eventos globais                                              â”‚   â”‚
â”‚  â”‚ - Memory management                                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SHARED MODULES           â”‚    â”‚   CACHE LAYER                     â”‚
â”‚                            â”‚    â”‚                                   â”‚
â”‚ Firebase Service â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â†’ Data Cache (TTL)               â”‚
â”‚ Database Manager           â”‚    â”‚   - Orders: 30s                  â”‚
â”‚ Error Handler              â”‚    â”‚   - Products: 5m                 â”‚
â”‚ Logger                     â”‚    â”‚   - Categories: 10m              â”‚
â”‚ Error Boundary             â”‚    â”‚   - Inventory: 1m                â”‚
â”‚ System Cleaner             â”‚    â”‚                                   â”‚
â”‚ Utils                      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Online Orders Listener     â”‚                      â”‚
â”‚ Performance Helpers        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            â”‚    â”‚   STORAGE LAYER                    â”‚
â”‚                            â”‚    â”‚                                    â”‚
â”‚                            â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                            â”‚    â”‚ â”‚ INDEXED DB   â”‚   FIREBASE     â”‚  â”‚
â”‚                            â”‚    â”‚ â”‚ (Local)      â”‚   (Cloud)      â”‚  â”‚
â”‚                            â”‚    â”‚ â”‚              â”‚                â”‚  â”‚
â”‚                            â”‚    â”‚ â”‚ - orders     â”‚ - orders       â”‚  â”‚
â”‚                            â”‚    â”‚ â”‚ - products   â”‚ - products     â”‚  â”‚
â”‚                            â”‚    â”‚ â”‚ - customers  â”‚ - customers    â”‚  â”‚
â”‚                            â”‚    â”‚ â”‚ - inventory  â”‚ - financial    â”‚  â”‚
â”‚                            â”‚    â”‚ â”‚ - financial  â”‚ - auth (JWT)   â”‚  â”‚
â”‚                            â”‚    â”‚ â”‚ - settings   â”‚ - storage      â”‚  â”‚
â”‚                            â”‚    â”‚ â”‚ - deleted    â”‚ - realtime syncâ”‚  â”‚
â”‚                            â”‚    â”‚ â”‚ - history    â”‚                â”‚  â”‚
â”‚                            â”‚    â”‚ â”‚              â”‚                â”‚  â”‚
â”‚                            â”‚    â”‚ â”‚ 50MB quota   â”‚ unlimited      â”‚  â”‚
â”‚                            â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                            â”‚    â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Fluxo de Dados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REQUISIÃ‡ÃƒO DE DADOS                       â”‚
â”‚                  (ex: Carregar Pedidos)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Data Cache     â”‚
            â”‚  (Em MemÃ³ria)   â”‚
            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
                 â”‚        â”‚
            âœ…HITâ”‚        â”‚MISS
                 â”‚        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”   â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Retorna  â”‚   â”‚  IndexedDB      â”‚
        â”‚ do Cache â”‚   â”‚  (Local Storage)â”‚
        â”‚ (30s)    â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”˜
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚    â”‚    â”‚
                       âœ…HITâ”‚    â”‚MISSâ”‚
                            â”‚    â”‚    â”‚
                       â”Œâ”€â”€â”€â”€â–¼â”€â”€â” â”‚    â”‚
                       â”‚Return â”‚ â”‚    â”‚
                       â”‚Data   â”‚ â”‚    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
                                 â”‚    â”‚
                           â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚  Firebase Realtime  â”‚
                           â”‚  Database (Cloud)   â”‚
                           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                â”‚         â”‚
                          â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                          â”‚ SincronizaÃ§Ã£o       â”‚
                          â”‚ AutomÃ¡tica (Async)  â”‚
                          â”‚                     â”‚
                          â”‚ â€¢ UpdateIndexedDB   â”‚
                          â”‚ â€¢ UpdateDataCache   â”‚
                          â”‚ â€¢ NotifyListeners   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Estado de ConexÃ£o

```
                    ONLINE                    OFFLINE
                      âœ…                        âŒ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FirebaseService                                                 â”‚
â”‚                                                                 â”‚
â”‚ â€¢ Salva direto no Firebase              â€¢ Salva em Queue       â”‚
â”‚ â€¢ Sincroniza IndexedDB                  â€¢ Usa cache local      â”‚
â”‚ â€¢ Real-time updates ativos              â€¢ Opera offline        â”‚
â”‚ â€¢ Speed: ~100-500ms latÃªncia            â€¢ Speed: Imediato      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    Volta Online? SIM
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Auto-Sync          â”‚
                    â”‚ Processa Queue     â”‚
                    â”‚ Em ordem FIFO      â”‚
                    â”‚ Com retry automÃ¡ticoâ”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## MÃ³dulos e DependÃªncias

```
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚  app.js     â”‚
                         â”‚ (Bootstrap) â”‚
                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚               â”‚               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
        â”‚Module Managerâ”‚ â”‚Firebase   â”‚ â”‚IndexedDB    â”‚
        â”‚              â”‚ â”‚Config     â”‚ â”‚Manager      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚               â”‚              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚           â”‚               â”‚              â”‚
    â”‚      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚      â”‚Firebase  â”‚    â”‚Fire Serviceâ”‚  â”‚Data    â”‚
    â”‚      â”‚Manager   â”‚    â”‚(Sync)      â”‚  â”‚Cache   â”‚
    â”‚      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚            â”‚                             â”‚
    â”‚      â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
    â”‚      â”‚            â”‚        â”‚      â”‚
    â”‚      â”‚            â”‚        â”‚      â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â–¼â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â–¼â”€â”¬â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â–¼â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Dashboard   â”‚PDVâ”‚CardÃ¡pioâ”‚Pedidos        â”‚Estoque â”‚
â”œâ”€ KPIs      â”œâ”€â”€â”€â”¤ CRUD   â”œâ”€ GestÃ£o       â”œâ”€ Inv   â”‚
â”œâ”€ Charts    â”‚   â”‚ Busca  â”‚ - Status      â”‚- Mov   â”‚
â”œâ”€ Stats     â”‚   â”‚ Filtro â”‚ - Online      â”‚- Alertaâ”‚
â”œâ”€ Auto-upd  â”‚   â”‚ 28 opt â”‚ - Notif       â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Financeiro    â”‚Clientes  â”‚RelatÃ³riosâ”‚Config      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚- Accountant  â”‚- CRM     â”‚- Export  â”‚- Temas     â”‚
â”‚- Analyst     â”‚- Histor  â”‚- PDF     â”‚- Backup    â”‚
â”‚- Consultant  â”‚- Segment â”‚- GrÃ¡ficosâ”‚- System    â”‚
â”‚- Planner     â”‚- Dados   â”‚- Filtros â”‚            â”‚
â”‚- 5 experts   â”‚          â”‚          â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance - Cache Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         REQUEST HITS: 317 Pedidos (Performance)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Primeira RequisiÃ§Ã£o: /api/orders
                â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 1. Data Cache     â”‚ MISS (primeira vez)
        â”‚    30s TTL        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 2. IndexedDB      â”‚ MISS (cold start)
        â”‚    Disco local    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ 3. Firebase       â”‚ HIT - Busca dados
        â”‚    (Cloud)        â”‚ ~200-300ms
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ â€¢ Armazenar em IndexedDB      â”‚
        â”‚ â€¢ Colocar em Data Cache (30s) â”‚
        â”‚ â€¢ Retornar para UI            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2Âª RequisiÃ§Ã£o (dentro 30s): /api/orders
                â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Data Cache HIT!  â”‚  <10ms
        â”‚ Retorna imediato â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3Âª RequisiÃ§Ã£o (apÃ³s 30s): /api/orders
                â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Data Cache MISS  â”‚  TTL expirado
        â”‚ (30s passaram)   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ IndexedDB HIT!   â”‚  ~50ms (dados locais)
        â”‚ + Firebase async â”‚
        â”‚ Atualizar cache  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Resultado Final:
- Cache Hit Rate: ~80-90%
- Average Response: <50ms
- Network Requests: Reduzidos em 80%
```

## SeguranÃ§a - AutenticaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           FLUXO DE LOGIN                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

UsuÃ¡rio â†’ Tela Login
    â†“
    Email/Senha (ou Google OAuth)
    â†“
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Firebase Authentication           â”‚
â”‚                                   â”‚
â”‚ â€¢ Validar credenciais             â”‚
â”‚ â€¢ Gerar JWT Token                 â”‚
â”‚ â€¢ Persistir sessÃ£o                â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    âœ… JWT Token armazenado
    â”‚  (localStorage seguro)
    â”‚
    â”œâ”€ User ID
    â”œâ”€ Email
    â”œâ”€ Display Name
    â”œâ”€ Role (owner/manager/cashier)
    â””â”€ Expiry
    
Dashboard Carregado
    â”œâ”€ Usar JWT para requisiÃ§Ãµes
    â”œâ”€ Sincronizar dados do usuÃ¡rio
    â””â”€ Verificar permissÃµes

Logout
    â”œâ”€ Limpar JWT
    â”œâ”€ Redirecionar para login
    â””â”€ Destruir sessÃ£o Firebase
```

## Monitoramento - Error Handling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             SISTEMA DE ERROS GLOBAL                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Erro Ocorre
    â†“
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Error Handler capta             â”‚
â”‚ â€¢ Tipo: runtime/promise/etc     â”‚
â”‚ â€¢ Severity: critical/high/med   â”‚
â”‚ â€¢ Stack trace                   â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â†’ ğŸ“ Log no Console (dev)
    â”œâ”€â†’ ğŸ’¾ Armazenar em memÃ³ria (max 100)
    â”œâ”€â†’ ğŸ“¢ Notificar listeners (mÃ³dulos)
    â”œâ”€â†’ ğŸ¯ Mostrar ao usuÃ¡rio (se critical)
    â”œâ”€â†’ ğŸ”„ Tentar recovery automÃ¡tica
    â””â”€â†’ ğŸ’¿ Persistir em localStorage
    
Recovery Strategies:
    â”œâ”€ Database: Reconectar
    â”œâ”€ Module: Recarregar mÃ³dulo
    â””â”€ UI: Mostrar fallback

User vÃª:
    â””â”€ Toast: "Erro ao carregar. Tentando novamente..."
       (RecuperaÃ§Ã£o automÃ¡tica silenciosa)
```

## Real-Time Updates - Pedidos Online

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      INTEGRAÃ‡ÃƒO CARDÃPIO DIGITAL EXTERNO                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cliente Faz Pedido Online
    â†“
CardÃ¡pio Digital (Website/App)
    â†“
Firebase: online-orders
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OnlineOrdersListener                     â”‚
â”‚                                          â”‚
â”‚ â€¢ Escuta mudanÃ§as em tempo real          â”‚
â”‚ â€¢ Valida dados (cliente OR itens)        â”‚
â”‚ â€¢ Detecta duplicatas (Set de IDs)        â”‚
â”‚ â€¢ Importa para banco local               â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â†’ ğŸ“¢ NotificaÃ§Ã£o Visual (badge)
    â”œâ”€â†’ ğŸ”Š NotificaÃ§Ã£o Sonora (Ã¡udio)
    â”œâ”€â†’ ğŸ“± Toast mensagem
    â””â”€â†’ ğŸ’¿ Sincroniza para IndexedDB
    
Painel de Pedidos Atualiza
    â”œâ”€ Novo pedido aparece
    â”œâ”€ Status: "importado"
    â””â”€ Gerente pode confirmar

Timeline:
    T+0s    Pedido feito online
    T+0.5s  Firebase recebe
    T+1s    Listener detecta
    T+1.5s  NotificaÃ§Ãµes geradas
    T+2s    UI atualizada
```

## Offline Mode - SincronizaÃ§Ã£o

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FUNCIONAMENTO OFFLINE                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ONLINE â†’ OFFLINE (Internet cai)
    â”‚
    â”œâ”€ Service Worker detecta
    â”œâ”€ FirebaseService marca: offlineMode = true
    â”œâ”€ OperaÃ§Ãµes passam para Queue
    â””â”€ UI continua funcionando (dados em cache)

UsuÃ¡rio faz operaÃ§Ãµes offline:
    â”œâ”€ Novo pedido â†’ Fila
    â”œâ”€ Atualizar pedido â†’ Fila
    â”œâ”€ Atualizar produto â†’ Fila
    â””â”€ Tudo salvo em localStorage + IndexedDB

Queue contÃ©m:
    â”œâ”€ Timestamp da operaÃ§Ã£o
    â”œâ”€ Tipo: save/update/delete
    â”œâ”€ Collection: orders/products/etc
    â”œâ”€ Dados completos
    â””â”€ Status: pending/synced/failed

OFFLINE â†’ ONLINE (Internet volta)
    â”‚
    â”œâ”€ FirebaseService detecta conexÃ£o
    â”œâ”€ Inicia sincronizaÃ§Ã£o automÃ¡tica
    â”œâ”€ Processa fila em ordem FIFO
    â”‚  â”œâ”€ Op 1: save order (T:14:00)
    â”‚  â”œâ”€ Op 2: update product (T:14:15)
    â”‚  â”œâ”€ Op 3: delete item (T:14:30)
    â”‚  â””â”€ Retry automÃ¡tico em falhas
    â”‚
    â”œâ”€ Atualizar IndexedDB com resposta
    â”œâ”€ Atualizar Data Cache
    â”œâ”€ Notificar listeners (UI recarrega)
    â””â”€ Limpar fila sincronizada

Resultado: Zero perda de dados!
    â””â”€ Tudo sincronizado como se fossem instantÃ¢neos
```

## Performance Metrics

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MÃ‰TRICAS DE PERFORMANCE                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Page Load (Cold Start):
    HTML            <200ms      âš¡ Excelente
    CSS             <300ms      âš¡ Excelente
    JavaScript      <1s         âœ… Bom
    Firebase init   <2s         âœ… Bom (ou cache)
    UI Renderizado  <5s         âœ… Bom
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Total           ~5s         âœ… AceitÃ¡vel

Memory Usage:
    Base page       30-50MB     âœ… OK
    Com 317 pedidos 60-80MB     âœ… OK
    Peak            ~100MB      âœ… OK (mÃ¡ximo aceitÃ¡vel)

Dashboard Update (2min):
    Fetch dados     50-100ms    âš¡ RÃ¡pido
    Calc stats      10-20ms     âš¡ RÃ¡pido
    Render UI       20-50ms     âš¡ RÃ¡pido
    Chart.js        100-200ms   âœ… OK
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    Total           <500ms      âš¡ RÃ¡pido

Pedidos Filtering (317 items):
    Aplicar filtro  <100ms      âš¡ Excelente
    Paginar         <10ms       âš¡ Excelente
    Busca regex     <50ms       âš¡ Excelente

Network:
    Firebase Sync   ~100-300ms  âœ… Bom
    Cache Hit Rate  80-90%      âš¡ Excelente
    Offline Support 100%        âœ… Completo

Cache TTL Strategy:
    Orders          30s         (Muda frequente)
    Products        5min        (Muda pouco)
    Customers       5min        (Muda pouco)
    Categories      10min       (Raramente muda)
    Inventory       1min        (Controle rigoroso)
```

## Deployment - Netlify

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PIPELINE DE DEPLOYMENT                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Arquivo Local:
    sistema-pdv-hamburgueria/
        â””â”€ Todos os arquivos

OpÃ§Ã£o 1: Drag & Drop (Mais RÃ¡pido)
    â””â”€ app.netlify.com/drop
       â””â”€ Arrasta pasta
          â””â”€ Pronto! URL: https://xxxxx.netlify.app

OpÃ§Ã£o 2: Git Deploy (AutomÃ¡tico)
    â””â”€ GitHub conta
       â””â”€ Conecta repositÃ³rio no Netlify
          â””â”€ Cada push = Auto deploy
             â””â”€ CI/CD automÃ¡tico

OpÃ§Ã£o 3: CLI (Para Updates)
    â””â”€ netlify deploy --prod --dir="."
       â””â”€ Atualiza produÃ§Ã£o

ConfiguraÃ§Ã£o: netlify.toml
    â”œâ”€ Build command: echo 'No build required'
    â”œâ”€ Publish: . (raiz)
    â””â”€ Redirects: /* â†’ /index.html (SPA)

Resultado:
    â”œâ”€ URL pÃºblica: https://burgerpdv.netlify.app
    â”œâ”€ HTTPS automÃ¡tico (SSL)
    â”œâ”€ CDN global (rÃ¡pido mundialmente)
    â”œâ”€ Banda: 100GB/mÃªs FREE âœ…
    â”œâ”€ Build minutes: 300/mÃªs FREE âœ…
    â””â”€ Custo: $0/mÃªs

DNS Customizado (Opcional):
    â””â”€ apontardominio.com â†’ DNS Netlify
       â””â”€ https://apontardominio.com
```

---

**Diagrama Atualizado:** 27 de janeiro de 2026
