<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>üçî Cozinha - Produ√ß√£o | GO BURGER</title>
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçî</text></svg>">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts - Monospace para estilo comanda -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --bg-dark: #0f0f0f;
            --bg-card: #1a1a1a;
            --text-white: #ffffff;
            --text-gray: #888888;
            --accent-orange: #ff6b35;
            --accent-green: #00d26a;
            --accent-blue: #00b4d8;
            --accent-purple: #9d4edd;
            --border: #333333;
        }
        
        body {
            font-family: 'JetBrains Mono', monospace;
            background: var(--bg-dark);
            min-height: 100vh;
            color: var(--text-white);
        }
        
        /* ========== HEADER ========== */
        .header {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            padding: 15px 30px;
            border-bottom: 3px solid var(--accent-orange);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            max-width: 1800px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            font-size: 2.5rem;
        }
        
        .logo-text {
            font-family: 'Poppins', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-orange);
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .header-stats {
            display: flex;
            gap: 30px;
        }
        
        .stat-box {
            text-align: center;
            padding: 10px 25px;
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            border: 1px solid var(--border);
        }
        
        .stat-box .number {
            font-size: 2rem;
            font-weight: 700;
        }
        
        .stat-box .label {
            font-size: 0.75rem;
            color: var(--text-gray);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stat-box.confirmed .number { color: var(--accent-blue); }
        .stat-box.preparing .number { color: var(--accent-purple); }
        .stat-box.ready .number { color: var(--accent-green); }
        
        .header-time {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--accent-orange);
        }
        
        /* ========== MAIN ========== */
        .main {
            max-width: 1800px;
            margin: 0 auto;
            padding: 30px;
        }
        
        /* ========== GRID DE COMANDAS ========== */
        .orders-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }
        
        /* ========== COMANDA (CARD) ========== */
        .comanda {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid var(--border);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .comanda:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .comanda.confirmed { border-color: var(--accent-blue); }
        .comanda.preparing { border-color: var(--accent-purple); }
        .comanda.ready { border-color: var(--accent-green); }
        
        /* Header da Comanda */
        .comanda-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px dashed var(--border);
        }
        
        .comanda.confirmed .comanda-header { background: rgba(0, 180, 216, 0.15); }
        .comanda.preparing .comanda-header { background: rgba(157, 78, 221, 0.15); }
        .comanda.ready .comanda-header { background: rgba(0, 210, 106, 0.15); }
        
        .comanda-numero {
            font-size: 1.8rem;
            font-weight: 700;
        }
        
        .comanda.confirmed .comanda-numero { color: var(--accent-blue); }
        .comanda.preparing .comanda-numero { color: var(--accent-purple); }
        .comanda.ready .comanda-numero { color: var(--accent-green); }
        
        .comanda-status {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .comanda.confirmed .comanda-status { 
            background: var(--accent-blue); 
            color: white;
        }
        .comanda.preparing .comanda-status { 
            background: var(--accent-purple); 
            color: white;
            animation: pulse 1.5s infinite;
        }
        .comanda.ready .comanda-status { 
            background: var(--accent-green); 
            color: white;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        /* Info do Pedido */
        .comanda-info {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.03);
            border-bottom: 1px solid var(--border);
        }
        
        .comanda-tipo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: var(--text-gray);
        }
        
        .comanda-tipo i {
            font-size: 1.2rem;
            color: var(--accent-orange);
        }
        
        .comanda-hora {
            font-size: 0.85rem;
            color: var(--text-gray);
        }
        
        .comanda-hora strong {
            color: var(--accent-orange);
            font-size: 1rem;
        }
        
        /* Lista de Itens */
        .comanda-itens {
            padding: 20px;
        }
        
        .comanda-itens-title {
            font-size: 0.75rem;
            color: var(--text-gray);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border);
        }
        
        .item {
            padding: 12px 0;
            border-bottom: 1px dashed rgba(255,255,255,0.1);
        }
        
        .item:last-child {
            border-bottom: none;
        }
        
        .item-main {
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        
        .item-qty {
            background: var(--accent-orange);
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            min-width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }
        
        .item-nome {
            flex: 1;
            font-size: 1.1rem;
            font-weight: 600;
            line-height: 1.4;
        }
        
        .item-detalhes {
            margin-top: 8px;
            padding-left: 55px;
        }
        
        .item-extras {
            font-size: 0.85rem;
            color: var(--accent-green);
            margin-bottom: 5px;
        }
        
        .item-extras::before {
            content: "+ ";
        }
        
        .item-removidos {
            font-size: 0.85rem;
            color: #ff6b6b;
            margin-bottom: 5px;
        }
        
        .item-removidos::before {
            content: "- ";
        }
        
        .item-obs {
            font-size: 0.85rem;
            color: var(--accent-orange);
            font-style: italic;
            padding: 8px 12px;
            background: rgba(255, 107, 53, 0.1);
            border-left: 3px solid var(--accent-orange);
            border-radius: 0 5px 5px 0;
            margin-top: 8px;
        }
        
        /* Observa√ß√µes Gerais */
        .comanda-obs {
            padding: 15px 20px;
            background: rgba(255, 107, 53, 0.1);
            border-top: 2px dashed var(--accent-orange);
        }
        
        .comanda-obs-title {
            font-size: 0.75rem;
            color: var(--accent-orange);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        
        .comanda-obs-text {
            font-size: 0.95rem;
            color: var(--text-white);
        }
        
        /* Footer da Comanda */
        .comanda-footer {
            padding: 15px 20px;
            background: rgba(255,255,255,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 2px solid var(--border);
        }
        
        .comanda-cliente {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .cliente-avatar {
            width: 35px;
            height: 35px;
            background: var(--accent-orange);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1rem;
        }
        
        .cliente-nome {
            font-size: 0.95rem;
            font-weight: 600;
        }
        
        .comanda-total {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent-green);
        }
        
        /* ========== EMPTY STATE ========== */
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 100px 20px;
        }
        
        .empty-state i {
            font-size: 5rem;
            color: var(--text-gray);
            margin-bottom: 20px;
        }
        
        .empty-state h3 {
            font-size: 1.5rem;
            color: var(--text-gray);
            margin-bottom: 10px;
        }
        
        .empty-state p {
            color: var(--text-gray);
            font-size: 0.9rem;
        }
        
        /* ========== LOADING ========== */
        .loading {
            grid-column: 1 / -1;
            text-align: center;
            padding: 100px 20px;
        }
        
        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--border);
            border-top-color: var(--accent-orange);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* ========== RESPONSIVE ========== */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .header-stats {
                gap: 15px;
            }
            
            .stat-box {
                padding: 8px 15px;
            }
            
            .stat-box .number {
                font-size: 1.5rem;
            }
            
            .orders-grid {
                grid-template-columns: 1fr;
            }
            
            .main {
                padding: 15px;
            }
        }
        
        /* ========== FULLSCREEN BUTTON ========== */
        .fullscreen-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: var(--accent-orange);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 1000;
            transition: transform 0.2s;
        }
        
        .fullscreen-btn:hover {
            transform: scale(1.1);
        }
        
        /* ========== CONNECTION STATUS ========== */
        .connection-badge {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 1000;
        }
        
        .connection-badge.online {
            background: rgba(0, 210, 106, 0.2);
            color: var(--accent-green);
            border: 1px solid var(--accent-green);
        }
        
        .connection-badge.offline {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid #ef4444;
        }
        
        .connection-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
            animation: blink 1.5s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
    </style>
</head>
<body>
    <!-- Connection Badge -->
    <div class="connection-badge offline" id="connection-badge">
        <span class="connection-dot"></span>
        <span id="connection-text">Conectando...</span>
    </div>
    
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <span class="logo-icon">üçî</span>
                <span class="logo-text">Cozinha</span>
            </div>
            
            <div class="header-stats">
                <div class="stat-box confirmed">
                    <div class="number" id="count-confirmed">0</div>
                    <div class="label">Novos</div>
                </div>
                <div class="stat-box preparing">
                    <div class="number" id="count-preparing">0</div>
                    <div class="label">Preparando</div>
                </div>
                <div class="stat-box ready">
                    <div class="number" id="count-ready">0</div>
                    <div class="label">Prontos</div>
                </div>
            </div>
            
            <div class="header-time" id="clock">00:00:00</div>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="main">
        <div class="orders-grid" id="orders-grid">
            <div class="loading">
                <div class="spinner"></div>
                <p>Carregando pedidos...</p>
            </div>
        </div>
    </main>
    
    <!-- Fullscreen Button -->
    <button class="fullscreen-btn" onclick="toggleFullscreen()" title="Tela Cheia">
        <i class="fas fa-expand"></i>
    </button>
    
    <!-- Audio para notifica√ß√£o -->
    <audio id="notification-sound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1iZmVlgpOYkI6EhYGDhImMj5KSkY+OjIyLjIuMi4uLi4uLi4uLi4uMjIyNjY6PkJCRkpKSkpGQkI+OjY2MjIuLi4qKioqKioqKiouLi4yMjY2Oj4+QkZGSk5OTk5KSkZCPjo2NjIyLi4uKioqJiYmJiYmJiYqKiouLjIyNjY6Pj5CRkZKSkpKSkZGQj46NjYyMi4uLioqKiYmJiYmJiYmKioqLi4yMjY2Oj4+QkZGSkpKSkpGRkI+OjY2MjIuLi4qKiomJiYmJiYmJioqKi4uMjI2Njo+PkJGRkpKSkpKRkZCPjo2NjIyLi4uKioqJiYmJiYmJiYqKiouLjIyNjY6Pj5CRkZKSkpKSkZGQj46NjYyMi4uLioqKiYmJiYmJiQ==" type="audio/wav">
    </audio>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <script>
        // ========================================
        // CONFIGURA√á√ÉO FIREBASE
        // ========================================
        const firebaseConfig = {
            apiKey: "AIzaSyBqJQd0YpxjndeUDLoBIDjw7WPpE42YI6s",
            authDomain: "burgerpdv.firebaseapp.com",
            databaseURL: "https://burgerpdv-default-rtdb.firebaseio.com",
            projectId: "burgerpdv",
            storageBucket: "burgerpdv.firebasestorage.app",
            messagingSenderId: "810043325830",
            appId: "1:810043325830:web:fcbdb9de2c6330633c4007"
        };
        
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // ========================================
        // ESTADO
        // ========================================
        let orders = [];
        let lastOrderCount = 0;
        
        // ========================================
        // INICIALIZA√á√ÉO
        // ========================================
        document.addEventListener('DOMContentLoaded', function() {
            startClock();
            loadOrders();
        });
        
        // ========================================
        // REL√ìGIO
        // ========================================
        function startClock() {
            function updateClock() {
                const now = new Date();
                document.getElementById('clock').textContent = now.toLocaleTimeString('pt-BR');
            }
            updateClock();
            setInterval(updateClock, 1000);
        }
        
        // ========================================
        // CARREGAR PEDIDOS
        // ========================================
        function loadOrders() {
            // Monitorar conex√£o
            database.ref('.info/connected').on('value', (snapshot) => {
                const connected = snapshot.val();
                const badge = document.getElementById('connection-badge');
                const text = document.getElementById('connection-text');
                
                if (connected) {
                    badge.className = 'connection-badge online';
                    text.textContent = 'Conectado';
                } else {
                    badge.className = 'connection-badge offline';
                    text.textContent = 'Desconectado';
                }
            });
            
            // Listener para pedidos em tempo real
            database.ref('online-orders').on('value', (snapshot) => {
                const data = snapshot.val();
                
                if (data) {
                    // Converter para array
                    const allOrders = Object.entries(data).map(([id, order]) => ({
                        id,
                        ...order
                    }));
                    
                    // FILTRAR APENAS: confirmed, preparing, ready (produ√ß√£o)
                    // E pedidos das √∫ltimas 24h
                    const now = new Date();
                    const oneDayAgo = new Date(now.getTime() - 24 * 60 * 60 * 1000);
                    
                    orders = allOrders.filter(order => {
                        // S√≥ status de produ√ß√£o
                        const validStatuses = ['confirmed', 'preparing', 'ready'];
                        if (!validStatuses.includes(order.status)) return false;
                        
                        // Verificar se tem dados m√≠nimos
                        const hasItems = (order.items && order.items.length > 0) || 
                                        (order.itens && order.itens.length > 0);
                        if (!hasItems) return false;
                        
                        // Verificar data (√∫ltimas 24h)
                        const dateStr = order.createdAt || order.date || order.timestamp;
                        if (dateStr) {
                            try {
                                const orderDate = new Date(dateStr);
                                if (orderDate < oneDayAgo) return false;
                            } catch (e) {}
                        }
                        
                        return true;
                    });
                    
                    // Ordenar: confirmed primeiro, depois preparing, depois ready
                    // E por data (mais antigo primeiro para produ√ß√£o)
                    const statusOrder = { 'confirmed': 1, 'preparing': 2, 'ready': 3 };
                    orders.sort((a, b) => {
                        if (statusOrder[a.status] !== statusOrder[b.status]) {
                            return statusOrder[a.status] - statusOrder[b.status];
                        }
                        // Mesmo status: mais antigo primeiro
                        const dateA = new Date(a.createdAt || a.date || 0);
                        const dateB = new Date(b.createdAt || b.date || 0);
                        return dateA - dateB;
                    });
                    
                    // Notificar novos pedidos
                    const confirmedCount = orders.filter(o => o.status === 'confirmed').length;
                    if (confirmedCount > lastOrderCount && lastOrderCount > 0) {
                        playSound();
                    }
                    lastOrderCount = confirmedCount;
                    
                    renderOrders();
                    updateStats();
                } else {
                    orders = [];
                    renderOrders();
                    updateStats();
                }
            });
        }
        
        // ========================================
        // RENDERIZAR PEDIDOS
        // ========================================
        function renderOrders() {
            const grid = document.getElementById('orders-grid');
            
            if (orders.length === 0) {
                grid.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-check-circle"></i>
                        <h3>Nenhum pedido em produ√ß√£o</h3>
                        <p>Aguardando novos pedidos confirmados...</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = orders.map(order => createComanda(order)).join('');
        }
        
        // ========================================
        // CRIAR COMANDA
        // ========================================
        function createComanda(order) {
            const status = order.status || 'confirmed';
            const statusText = getStatusText(status);
            
            // N√∫mero do pedido
            const orderNumber = order.number || order.numero || order.id.slice(-4).toUpperCase();
            
            // Tipo do pedido
            let orderType = 'balcao';
            if (order.entrega?.tipo === 'entrega' || order.orderType === 'delivery' || order.tipo === 'delivery') {
                orderType = 'delivery';
            } else if (order.orderType === 'mesa' || order.tipo === 'mesa') {
                orderType = 'mesa';
            }
            const typeIcon = orderType === 'delivery' ? 'motorcycle' : orderType === 'mesa' ? 'utensils' : 'store';
            const typeText = orderType === 'delivery' ? 'Delivery' : orderType === 'mesa' ? 'Mesa ' + (order.table || order.mesa || '') : 'Balc√£o';
            
            // Cliente
            const customerName = order.cliente?.nome || order.customer?.name || order.customerName || 'Cliente';
            const customerInitial = customerName.charAt(0).toUpperCase();
            
            // Hora do pedido
            const orderDate = new Date(order.createdAt || order.date || order.timestamp);
            const timeStr = orderDate.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
            const timeElapsed = getTimeElapsed(orderDate);
            
            // Items
            const items = order.items || order.itens || [];
            const itemsHtml = items.map(item => createItemHtml(item)).join('');
            
            // Total
            const total = order.total || order.valores?.total || 0;
            
            // Observa√ß√µes gerais
            const notes = order.notes || order.observacoes || order.observations || '';
            
            return `
                <div class="comanda ${status}">
                    <div class="comanda-header">
                        <span class="comanda-numero">#${orderNumber}</span>
                        <span class="comanda-status">${statusText}</span>
                    </div>
                    
                    <div class="comanda-info">
                        <div class="comanda-tipo">
                            <i class="fas fa-${typeIcon}"></i>
                            <span>${typeText}</span>
                        </div>
                        <div class="comanda-hora">
                            <i class="fas fa-clock"></i>
                            ${timeStr} <strong>(${timeElapsed})</strong>
                        </div>
                    </div>
                    
                    <div class="comanda-itens">
                        <div class="comanda-itens-title">Itens do Pedido</div>
                        ${itemsHtml}
                    </div>
                    
                    ${notes ? `
                        <div class="comanda-obs">
                            <div class="comanda-obs-title">‚ö†Ô∏è Observa√ß√µes</div>
                            <div class="comanda-obs-text">${notes}</div>
                        </div>
                    ` : ''}
                    
                    <div class="comanda-footer">
                        <div class="comanda-cliente">
                            <div class="cliente-avatar">${customerInitial}</div>
                            <div class="cliente-nome">${customerName}</div>
                        </div>
                        <div class="comanda-total">R$ ${total.toFixed(2)}</div>
                    </div>
                </div>
            `;
        }
        
        // ========================================
        // CRIAR ITEM HTML
        // ========================================
        function createItemHtml(item) {
            const qty = item.quantity || item.quantidade || 1;
            const name = item.name || item.nome || item.product?.name || 'Item';
            
            // Extras/Adicionais
            let extrasHtml = '';
            const extras = item.extras || item.adicionais || [];
            if (extras.length > 0) {
                const extraNames = extras.map(e => e.name || e.nome || e).join(', ');
                extrasHtml = `<div class="item-extras">${extraNames}</div>`;
            }
            
            // Removidos
            let removedHtml = '';
            const removed = item.removed || item.removidos || [];
            if (removed.length > 0) {
                const removedNames = removed.map(r => r.name || r.nome || r).join(', ');
                removedHtml = `<div class="item-removidos">${removedNames}</div>`;
            }
            
            // Observa√ß√£o do item
            let obsHtml = '';
            const obs = item.notes || item.observacoes || item.observation || '';
            if (obs) {
                obsHtml = `<div class="item-obs">${obs}</div>`;
            }
            
            // Customiza√ß√µes (ponto da carne, etc)
            let customHtml = '';
            const customizations = item.customizations || item.personalizacoes || [];
            if (customizations.length > 0) {
                const customText = customizations.map(c => {
                    if (typeof c === 'string') return c;
                    return c.name || c.option || '';
                }).filter(Boolean).join(', ');
                if (customText) {
                    extrasHtml += `<div class="item-extras">${customText}</div>`;
                }
            }
            
            return `
                <div class="item">
                    <div class="item-main">
                        <div class="item-qty">${qty}x</div>
                        <div class="item-nome">${name}</div>
                    </div>
                    ${extrasHtml || removedHtml || obsHtml ? `
                        <div class="item-detalhes">
                            ${extrasHtml}
                            ${removedHtml}
                            ${obsHtml}
                        </div>
                    ` : ''}
                </div>
            `;
        }
        
        // ========================================
        // ATUALIZAR ESTAT√çSTICAS
        // ========================================
        function updateStats() {
            const confirmed = orders.filter(o => o.status === 'confirmed').length;
            const preparing = orders.filter(o => o.status === 'preparing').length;
            const ready = orders.filter(o => o.status === 'ready').length;
            
            document.getElementById('count-confirmed').textContent = confirmed;
            document.getElementById('count-preparing').textContent = preparing;
            document.getElementById('count-ready').textContent = ready;
        }
        
        // ========================================
        // UTILIDADES
        // ========================================
        function getStatusText(status) {
            const map = {
                'confirmed': 'Novo',
                'preparing': 'Preparando',
                'ready': 'Pronto'
            };
            return map[status] || status;
        }
        
        function getTimeElapsed(date) {
            const now = new Date();
            const diff = Math.floor((now - date) / 1000 / 60); // minutos
            
            if (diff < 1) return 'agora';
            if (diff < 60) return diff + ' min';
            const hours = Math.floor(diff / 60);
            const mins = diff % 60;
            return hours + 'h' + (mins > 0 ? mins + 'm' : '');
        }
        
        function playSound() {
            try {
                const audio = document.getElementById('notification-sound');
                audio.currentTime = 0;
                audio.play();
            } catch (e) {
                console.log('Som n√£o dispon√≠vel');
            }
        }
        
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }
    </script>
</body>
</html>
